@using A2UI.Blazor.Protocol
@inherits A2UIComponentBase

@{
    var justify = GetString("justify") ?? "start";
    var align = GetString("align") ?? "center";
    var gap = GetString("gap") ?? "8";
    var childIds = GetChildIds();
}

<div class="a2ui-row" style="justify-content: @MapJustify(justify); align-items: @MapAlign(align); gap: @(gap)px;">
    @foreach (var childId in childIds)
    {
        if (Surface.Components.TryGetValue(childId, out var child))
        {
            <A2UIComponentRenderer Data="child" Surface="Surface" OnAction="OnAction" />
        }
    }
</div>

@code {
    [Parameter]
    public EventCallback<A2UIUserAction> OnAction { get; set; }

    private static string MapJustify(string justify) => justify switch
    {
        "start" => "flex-start",
        "center" => "center",
        "end" => "flex-end",
        "spaceBetween" => "space-between",
        "spaceAround" => "space-around",
        "spaceEvenly" => "space-evenly",
        _ => "flex-start"
    };

    private static string MapAlign(string align) => align switch
    {
        "start" => "flex-start",
        "center" => "center",
        "end" => "flex-end",
        "stretch" => "stretch",
        _ => "center"
    };
}
